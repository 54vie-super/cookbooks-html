"use strict";(globalThis.webpackChunk_54vie_cookbooks=globalThis.webpackChunk_54vie_cookbooks||[]).push([[880],{8145(n,e,i){i.d(e,{R:()=>s,x:()=>r});var t=i(5410);const o={},a=t.createContext(o);function s(n){const e=t.useContext(a);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:s(n.components),t.createElement(a.Provider,{value:e},n.children)}},9099(n,e,i){i.r(e),i.d(e,{assets:()=>c,contentTitle:()=>r,default:()=>p,frontMatter:()=>s,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"modules/push-notification","title":"@54vie/push","description":"Module for managing push notifications for 54VIE Super App, supporting FCM/APNs and local notifications.","source":"@site/docs/modules/push-notification.md","sourceDirName":"modules","slug":"/modules/push-notification","permalink":"/modules/push-notification","draft":false,"unlisted":false,"editUrl":"https://github.com/54vie/super-app/tree/main/cookbooks/docs/modules/push-notification.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"sidebar_position":9,"title":"@54vie/push"},"sidebar":"mainSidebar","previous":{"title":"@54vie/analytics","permalink":"/modules/analytics"},"next":{"title":"@54vie/device","permalink":"/modules/device"}}');var o=i(5178),a=i(8145);const s={sidebar_position:9,title:"@54vie/push"},r="@54vie/push - Push Notifications",c={},d=[{value:"Installation",id:"installation",level:2},{value:"Setup",id:"setup",level:2},{value:"Permission &amp; Token",id:"permission--token",level:2},{value:"Topic Subscription",id:"topic-subscription",level:2},{value:"Local Notifications",id:"local-notifications",level:2},{value:"Recurring Notifications",id:"recurring-notifications",level:3},{value:"Action Buttons",id:"action-buttons",level:3},{value:"Notification Center",id:"notification-center",level:2},{value:"Badge Management",id:"badge-management",level:2},{value:"Notification Channels (Android)",id:"notification-channels-android",level:2},{value:"Deep Linking",id:"deep-linking",level:2},{value:"Components",id:"components",level:2}];function l(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,a.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"54viepush---push-notifications",children:"@54vie/push - Push Notifications"})}),"\n",(0,o.jsx)(e.p,{children:"Module for managing push notifications for 54VIE Super App, supporting FCM/APNs and local notifications."}),"\n",(0,o.jsx)(e.h2,{id:"installation",children:"Installation"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"pnpm add @54vie/push\n"})}),"\n",(0,o.jsx)(e.h2,{id:"setup",children:"Setup"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-tsx",children:"import { PushProvider } from '@54vie/push';\n\nfunction App() {\n  return (\n    <PushProvider\n      onNotificationReceived={(notification) => {\n        console.log('Received:', notification);\n      }}\n      onNotificationOpened={(notification) => {\n        // Navigate based on notification data\n        if (notification.data?.orderId) {\n          navigation.navigate('OrderDetail', { id: notification.data.orderId });\n        }\n      }}\n    >\n      <MainApp />\n    </PushProvider>\n  );\n}\n"})}),"\n",(0,o.jsx)(e.h2,{id:"permission--token",children:"Permission & Token"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"import { usePush, pushService } from '@54vie/push';\n\nfunction NotificationSetup() {\n  const {\n    token,\n    isPermissionGranted,\n    requestPermission,\n    getToken,\n  } = usePush();\n\n  useEffect(() => {\n    if (!isPermissionGranted) {\n      requestPermission();\n    }\n  }, []);\n\n  // Send token to server\n  useEffect(() => {\n    if (token) {\n      api.post('/devices/register', { token });\n    }\n  }, [token]);\n}\n"})}),"\n",(0,o.jsx)(e.h2,{id:"topic-subscription",children:"Topic Subscription"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"import { pushService } from '@54vie/push';\n\n// Subscribe to topics\nawait pushService.subscribeToTopic('promotions');\nawait pushService.subscribeToTopic('news');\n\n// Unsubscribe\nawait pushService.unsubscribeFromTopic('promotions');\n"})}),"\n",(0,o.jsx)(e.h2,{id:"local-notifications",children:"Local Notifications"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"import { useLocalNotification, localNotificationService } from '@54vie/push';\n\nfunction OrderConfirmation() {\n  const { schedule, cancel, cancelAll } = useLocalNotification();\n\n  // Schedule notification\n  const remindPickup = async () => {\n    const id = await schedule({\n      title: 'Order Ready',\n      body: 'Your order is ready for pickup!',\n      data: { orderId: '123' },\n      scheduledAt: new Date(Date.now() + 30 * 60 * 1000), // 30 min\n    });\n\n    // Save ID to cancel later if needed\n    setReminderId(id);\n  };\n\n  // Cancel\n  const cancelReminder = () => {\n    cancel(reminderId);\n  };\n}\n"})}),"\n",(0,o.jsx)(e.h3,{id:"recurring-notifications",children:"Recurring Notifications"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"await schedule({\n  title: 'Daily Reminder',\n  body: 'Check your orders!',\n  repeatType: 'day',\n  scheduledAt: new Date(), // Start time\n});\n"})}),"\n",(0,o.jsx)(e.h3,{id:"action-buttons",children:"Action Buttons"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"// Create category with actions\nawait localNotificationService.createCategory('order', [\n  { id: 'accept', title: 'Accept', destructive: false },\n  { id: 'reject', title: 'Reject', destructive: true },\n]);\n\n// Schedule with category\nawait schedule({\n  title: 'New Order',\n  body: 'Order #123 received',\n  category: 'order',\n  data: { orderId: '123' },\n});\n"})}),"\n",(0,o.jsx)(e.h2,{id:"notification-center",children:"Notification Center"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"import { useNotifications, NotificationList } from '@54vie/push';\n\nfunction NotificationScreen() {\n  const {\n    notifications,\n    unreadCount,\n    markAsRead,\n    markAllAsRead,\n    deleteNotification,\n    clear,\n  } = useNotifications();\n\n  return (\n    <View>\n      <Header>\n        <Text>Notifications ({unreadCount})</Text>\n        <Button onPress={markAllAsRead}>Mark all read</Button>\n      </Header>\n\n      <NotificationList\n        notifications={notifications}\n        onPress={(n) => {\n          markAsRead(n.id);\n          handleNavigation(n.data);\n        }}\n        onDelete={(n) => deleteNotification(n.id)}\n      />\n    </View>\n  );\n}\n"})}),"\n",(0,o.jsx)(e.h2,{id:"badge-management",children:"Badge Management"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"import { pushService } from '@54vie/push';\n\n// Set badge count\nawait pushService.setBadgeCount(5);\n\n// Clear badge\nawait pushService.clearBadge();\n"})}),"\n",(0,o.jsx)(e.h2,{id:"notification-channels-android",children:"Notification Channels (Android)"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"import { NotificationChannel } from '@54vie/push';\n\n// Create channels (call at app start)\nawait NotificationChannel.create({\n  id: 'payments',\n  name: 'Payment Notifications',\n  importance: 'high',\n  sound: 'payment_sound',\n  vibration: true,\n});\n\nawait NotificationChannel.create({\n  id: 'promotions',\n  name: 'Promotions',\n  importance: 'default',\n});\n"})}),"\n",(0,o.jsx)(e.h2,{id:"deep-linking",children:"Deep Linking"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"import { DeepLinkRouter } from '@54vie/push';\n\n// Register routes\nDeepLinkRouter.register('order/:orderId', ({ orderId }) => {\n  navigation.navigate('OrderDetail', { id: orderId });\n});\n\nDeepLinkRouter.register('miniapp/:appId', ({ appId }) => {\n  navigation.navigate('MiniProgram', { appId });\n});\n\n// Handle notification tap\nonNotificationOpened((notification) => {\n  if (notification.data?.deepLink) {\n    DeepLinkRouter.navigate(notification.data.deepLink);\n  }\n});\n"})}),"\n",(0,o.jsx)(e.h2,{id:"components",children:"Components"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"import { NotificationBadge, NotificationItem } from '@54vie/push';\n\n// Badge with count\n<NotificationBadge>\n  <Icon name=\"bell\" />\n</NotificationBadge>\n\n// Notification item\n<NotificationItem\n  notification={notification}\n  onPress={() => handlePress(notification)}\n  onDelete={() => handleDelete(notification.id)}\n/>\n"})})]})}function p(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(l,{...n})}):l(n)}}}]);