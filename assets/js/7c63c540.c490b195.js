"use strict";(globalThis.webpackChunk_54vie_cookbooks=globalThis.webpackChunk_54vie_cookbooks||[]).push([[80],{3546(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>g,frontMatter:()=>o,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"modules/storage","title":"@54vie/storage","description":"High-performance persistent storage using MMKV.","source":"@site/docs/modules/storage.md","sourceDirName":"modules","slug":"/modules/storage","permalink":"/modules/storage","draft":false,"unlisted":false,"editUrl":"https://github.com/54vie/super-app/tree/main/cookbooks/docs/modules/storage.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"@54vie/storage"},"sidebar":"mainSidebar","previous":{"title":"@54vie/kit","permalink":"/modules/kit"},"next":{"title":"miniapp-sdk","permalink":"/modules/miniapp-sdk"}}');var s=t(5178),r=t(8145);const o={sidebar_position:4,title:"@54vie/storage"},i="@54vie/storage - Persistent Storage",c={},l=[{value:"Installation",id:"installation",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"StorageManager",id:"storagemanager",level:2},{value:"Constructor",id:"constructor",level:3},{value:"Methods",id:"methods",level:3},{value:"Hooks",id:"hooks",level:2},{value:"useStorage",id:"usestorage",level:3},{value:"useStorageItem",id:"usestorageitem",level:3},{value:"Typed Storage",id:"typed-storage",level:2},{value:"Encryption",id:"encryption",level:2},{value:"Migration",id:"migration",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Use namespaces",id:"1-use-namespaces",level:3},{value:"2. Type your data",id:"2-type-your-data",level:3}];function d(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"54viestorage---persistent-storage",children:"@54vie/storage - Persistent Storage"})}),"\n",(0,s.jsx)(n.p,{children:"High-performance persistent storage using MMKV."}),"\n",(0,s.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pnpm add @54vie/storage\n"})}),"\n",(0,s.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { StorageManager } from '@54vie/storage';\n\nconst storage = new StorageManager({ namespace: 'myapp' });\n\n// Set value\nawait storage.set('user', { name: 'John', age: 25 });\n\n// Get value\nconst user = await storage.get('user');\n\n// Remove\nawait storage.remove('user');\n"})}),"\n",(0,s.jsx)(n.h2,{id:"storagemanager",children:"StorageManager"}),"\n",(0,s.jsx)(n.h3,{id:"constructor",children:"Constructor"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const storage = new StorageManager({\n  namespace: 'myapp',        // Isolated namespace\n  encryption: true,          // Enable encryption (optional)\n  encryptionKey: 'secret',   // Encryption key (if encryption enabled)\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"methods",children:"Methods"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Get value (returns undefined if not exists)\nconst value = await storage.get<T>('key');\n\n// Get with default\nconst value = await storage.get('key', defaultValue);\n\n// Set value (supports any serializable value)\nawait storage.set('key', value);\n\n// Check if key exists\nconst exists = await storage.has('key');\n\n// Remove key\nawait storage.remove('key');\n\n// Clear all keys in namespace\nawait storage.clear();\n\n// Get all keys\nconst keys = await storage.getAllKeys();\n\n// Get multiple values\nconst values = await storage.getMultiple(['key1', 'key2']);\n\n// Set multiple values\nawait storage.setMultiple({\n  key1: value1,\n  key2: value2,\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"hooks",children:"Hooks"}),"\n",(0,s.jsx)(n.h3,{id:"usestorage",children:"useStorage"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { useStorage } from '@54vie/storage';\n\nfunction Settings() {\n  const [theme, setTheme] = useStorage('theme', 'light');\n\n  return (\n    <Switch\n      value={theme === 'dark'}\n      onValueChange={(dark) => setTheme(dark ? 'dark' : 'light')}\n    />\n  );\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"usestorageitem",children:"useStorageItem"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { useStorageItem } from '@54vie/storage';\n\nfunction Profile() {\n  const {\n    value: user,\n    setValue: setUser,\n    removeValue,\n    isLoading,\n  } = useStorageItem('user');\n\n  if (isLoading) return <Loading />;\n\n  return (\n    <View>\n      <Text>{user?.name}</Text>\n      <Button onPress={() => setUser({ ...user, name: 'New Name' })}>\n        Update\n      </Button>\n      <Button onPress={removeValue}>Logout</Button>\n    </View>\n  );\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"typed-storage",children:"Typed Storage"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface UserSettings {\n  theme: 'light' | 'dark';\n  notifications: boolean;\n  language: string;\n}\n\nconst settingsStorage = new StorageManager<UserSettings>({\n  namespace: 'settings',\n});\n\n// Type-safe get/set\nconst theme = await settingsStorage.get('theme');  // 'light' | 'dark' | undefined\nawait settingsStorage.set('theme', 'dark');        // Type checked\n"})}),"\n",(0,s.jsx)(n.h2,{id:"encryption",children:"Encryption"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const secureStorage = new StorageManager({\n  namespace: 'secure',\n  encryption: true,\n});\n\n// Values are encrypted at rest\nawait secureStorage.set('token', 'sensitive-data');\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsx)(n.p,{children:"Encryption adds overhead. Only use for sensitive data."})}),"\n",(0,s.jsx)(n.h2,{id:"migration",children:"Migration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { StorageManager, migrateStorage } from '@54vie/storage';\n\n// Migrate from old storage\nawait migrateStorage({\n  from: new StorageManager({ namespace: 'v1' }),\n  to: new StorageManager({ namespace: 'v2' }),\n  transform: (key, value) => {\n    // Transform data if needed\n    return value;\n  },\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsx)(n.h3,{id:"1-use-namespaces",children:"1. Use namespaces"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// \u2705 Good - Separate concerns\nconst authStorage = new StorageManager({ namespace: 'auth' });\nconst cacheStorage = new StorageManager({ namespace: 'cache' });\n\n// \u274c Bad - Everything in one place\nconst storage = new StorageManager({ namespace: 'app' });\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-type-your-data",children:"2. Type your data"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// \u2705 Good\ninterface CartItem {\n  id: string;\n  quantity: number;\n}\nconst cart = await storage.get<CartItem[]>('cart');\n\n// \u274c Bad\nconst cart = await storage.get('cart'); // any\n"})})]})}function g(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8145(e,n,t){t.d(n,{R:()=>o,x:()=>i});var a=t(5410);const s={},r=a.createContext(s);function o(e){const n=a.useContext(r);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);