"use strict";(globalThis.webpackChunk_54vie_cookbooks=globalThis.webpackChunk_54vie_cookbooks||[]).push([[411],{2031(e,n,i){i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>p,frontMatter:()=>o,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"api/miniapp-sdk/services","title":"Services API","description":"Service classes for accessing host app capabilities from mini-apps","source":"@site/docs/api/miniapp-sdk/services.md","sourceDirName":"api/miniapp-sdk","slug":"/api/miniapp-sdk/services","permalink":"/api/miniapp-sdk/services","draft":false,"unlisted":false,"editUrl":"https://github.com/54vie/super-app/tree/main/cookbooks/docs/api/miniapp-sdk/services.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Services API","sidebar_position":2,"description":"Service classes for accessing host app capabilities from mini-apps"},"sidebar":"apiSidebar","previous":{"title":"Hooks API","permalink":"/api/miniapp-sdk/hooks"},"next":{"title":"Bridge API","permalink":"/api/miniapp-sdk/bridge"}}');var r=i(5178),s=i(8145);const o={title:"Services API",sidebar_position:2,description:"Service classes for accessing host app capabilities from mini-apps"},c="Services API",a={},d=[{value:"storage",id:"storage",level:2},{value:"TypeScript Interface",id:"typescript-interface",level:3},{value:"Example",id:"example",level:3},{value:"Bridge Actions",id:"bridge-actions",level:3},{value:"device",id:"device",level:2},{value:"TypeScript Interface",id:"typescript-interface-1",level:3},{value:"Example",id:"example-1",level:3},{value:"Bridge Actions",id:"bridge-actions-1",level:3},{value:"network",id:"network",level:2},{value:"TypeScript Interface",id:"typescript-interface-2",level:3},{value:"Example",id:"example-2",level:3},{value:"Bridge Actions",id:"bridge-actions-2",level:3},{value:"push",id:"push",level:2},{value:"TypeScript Interface",id:"typescript-interface-3",level:3},{value:"Example",id:"example-3",level:3},{value:"Bridge Actions",id:"bridge-actions-3",level:3},{value:"analytics",id:"analytics",level:2},{value:"TypeScript Interface",id:"typescript-interface-4",level:3},{value:"Example",id:"example-4",level:3},{value:"Bridge Actions",id:"bridge-actions-4",level:3},{value:"api",id:"api",level:2},{value:"TypeScript Interface",id:"typescript-interface-5",level:3},{value:"Example",id:"example-5",level:3},{value:"Bridge Actions",id:"bridge-actions-5",level:3},{value:"Service Imports",id:"service-imports",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"services-api",children:"Services API"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@54vie/miniapp-sdk"})," provides singleton service instances that allow mini-apps to access host app capabilities. These services communicate with the host app through the bridge layer."]}),"\n",(0,r.jsx)(n.h2,{id:"storage",children:"storage"}),"\n",(0,r.jsx)(n.p,{children:"Persistent key-value storage service for mini-apps."}),"\n",(0,r.jsx)(n.h3,{id:"typescript-interface",children:"TypeScript Interface"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"interface StorageService {\n  /**\n   * Set storage scope/namespace\n   */\n  setScope(scope: string): void;\n\n  /**\n   * Get a value by key\n   * @returns The stored value or null if not found\n   */\n  get<T = unknown>(key: string): Promise<T | null>;\n\n  /**\n   * Set a value for a key\n   */\n  set<T = unknown>(key: string, value: T): Promise<void>;\n\n  /**\n   * Remove a value by key\n   */\n  remove(key: string): Promise<void>;\n\n  /**\n   * Clear all storage in the current scope\n   */\n  clear(): Promise<void>;\n\n  /**\n   * Get multiple values at once\n   * @returns Object mapping keys to their values\n   */\n  getMultiple<T = unknown>(keys: string[]): Promise<Record<string, T | null>>;\n\n  /**\n   * Set multiple values at once\n   */\n  setMultiple<T = unknown>(items: Record<string, T>): Promise<void>;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { storage } from '@54vie/miniapp-sdk';\n\n// Set a namespace for your mini-app data\nstorage.setScope('my-miniapp');\n\n// Store simple values\nawait storage.set('theme', 'dark');\nawait storage.set('language', 'vi');\n\n// Store complex objects\nawait storage.set('user_preferences', {\n  notifications: true,\n  autoPlay: false,\n  volume: 0.8,\n});\n\n// Retrieve values with type inference\nconst theme = await storage.get<string>('theme');\nconsole.log('Theme:', theme); // 'dark'\n\ninterface Preferences {\n  notifications: boolean;\n  autoPlay: boolean;\n  volume: number;\n}\nconst prefs = await storage.get<Preferences>('user_preferences');\nconsole.log('Volume:', prefs?.volume); // 0.8\n\n// Get multiple values at once\nconst settings = await storage.getMultiple(['theme', 'language']);\nconsole.log(settings); // { theme: 'dark', language: 'vi' }\n\n// Set multiple values at once\nawait storage.setMultiple({\n  lastVisited: Date.now(),\n  viewCount: 42,\n});\n\n// Remove a specific key\nawait storage.remove('theme');\n\n// Clear all storage in scope\nawait storage.clear();\n"})}),"\n",(0,r.jsx)(n.h3,{id:"bridge-actions",children:"Bridge Actions"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Action"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"storage.get"})}),(0,r.jsx)(n.td,{children:"Retrieve a value by key"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"storage.set"})}),(0,r.jsx)(n.td,{children:"Store a value"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"storage.remove"})}),(0,r.jsx)(n.td,{children:"Remove a value"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"storage.clear"})}),(0,r.jsx)(n.td,{children:"Clear all storage"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"device",children:"device"}),"\n",(0,r.jsx)(n.p,{children:"Access device hardware information and capabilities."}),"\n",(0,r.jsx)(n.h3,{id:"typescript-interface-1",children:"TypeScript Interface"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"interface DeviceInfo {\n  deviceId: string;\n  deviceName: string;\n  platform: 'ios' | 'android';\n  model: string;\n  brand: string;\n  osVersion: string;\n  appVersion: string;\n  buildNumber: string;\n  isEmulator: boolean;\n  isTablet: boolean;\n}\n\ninterface DeviceService {\n  /**\n   * Get complete device information\n   */\n  getInfo(): Promise<DeviceInfo>;\n\n  /**\n   * Get unique device identifier\n   */\n  getDeviceId(): Promise<string>;\n\n  /**\n   * Get host app version (e.g., \"1.0.0\")\n   */\n  getAppVersion(): Promise<string>;\n\n  /**\n   * Get host app build number\n   */\n  getBuildNumber(): Promise<string>;\n\n  /**\n   * Check if running on emulator/simulator\n   */\n  isEmulator(): Promise<boolean>;\n\n  /**\n   * Get mobile carrier name\n   */\n  getCarrier(): Promise<string | null>;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"example-1",children:"Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { device } from '@54vie/miniapp-sdk';\n\n// Get complete device info\nconst info = await device.getInfo();\nconsole.log(`Device: ${info.brand} ${info.model}`);\nconsole.log(`Platform: ${info.platform} ${info.osVersion}`);\nconsole.log(`App Version: ${info.appVersion} (${info.buildNumber})`);\n\n// Check specific properties\nconst deviceId = await device.getDeviceId();\nconsole.log('Device ID:', deviceId);\n\nconst isEmulator = await device.isEmulator();\nif (isEmulator) {\n  console.log('Running on emulator - some features may be limited');\n}\n\n// Get carrier info for mobile networks\nconst carrier = await device.getCarrier();\nif (carrier) {\n  console.log('Carrier:', carrier);\n}\n\n// Check app version for feature flags\nconst version = await device.getAppVersion();\nif (semver.gte(version, '2.0.0')) {\n  // Enable new feature\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"bridge-actions-1",children:"Bridge Actions"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Action"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"device.getInfo"})}),(0,r.jsx)(n.td,{children:"Get full device information"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"device.getDeviceId"})}),(0,r.jsx)(n.td,{children:"Get device identifier"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"device.getAppVersion"})}),(0,r.jsx)(n.td,{children:"Get host app version"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"device.getBuildNumber"})}),(0,r.jsx)(n.td,{children:"Get host app build number"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"device.isEmulator"})}),(0,r.jsx)(n.td,{children:"Check if emulator"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"device.getCarrier"})}),(0,r.jsx)(n.td,{children:"Get carrier name"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"network",children:"network"}),"\n",(0,r.jsx)(n.p,{children:"Check network connectivity and connection type."}),"\n",(0,r.jsx)(n.h3,{id:"typescript-interface-2",children:"TypeScript Interface"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"type ConnectionType = 'wifi' | 'cellular' | 'none' | 'unknown';\n\ninterface NetworkState {\n  isConnected: boolean;\n  isInternetReachable: boolean;\n  type: ConnectionType;\n  isWifi: boolean;\n  isCellular: boolean;\n  cellularGeneration?: '2g' | '3g' | '4g' | '5g';\n}\n\ninterface NetworkService {\n  /**\n   * Get full network state\n   */\n  getState(): Promise<NetworkState>;\n\n  /**\n   * Check if device is online\n   */\n  isOnline(): Promise<boolean>;\n\n  /**\n   * Get current connection type\n   */\n  getConnectionType(): Promise<ConnectionType>;\n\n  /**\n   * Check if connected via WiFi\n   */\n  isWifi(): Promise<boolean>;\n\n  /**\n   * Check if connected via cellular\n   */\n  isCellular(): Promise<boolean>;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"example-2",children:"Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { network } from '@54vie/miniapp-sdk';\n\n// Quick online check\nconst isOnline = await network.isOnline();\nif (!isOnline) {\n  showOfflineMessage();\n  return;\n}\n\n// Get detailed network state\nconst state = await network.getState();\nconsole.log('Connection type:', state.type);\nconsole.log('Internet reachable:', state.isInternetReachable);\n\nif (state.cellularGeneration) {\n  console.log('Cellular generation:', state.cellularGeneration);\n}\n\n// Optimize for connection type\nconst isWifi = await network.isWifi();\nif (isWifi) {\n  // Download high-res images\n  downloadHighResAssets();\n} else {\n  // Use compressed images on cellular\n  downloadCompressedAssets();\n}\n\n// Warn user on slow connection\nif (state.cellularGeneration === '2g' || state.cellularGeneration === '3g') {\n  showSlowConnectionWarning();\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"bridge-actions-2",children:"Bridge Actions"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Action"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"network.getState"})}),(0,r.jsx)(n.td,{children:"Get full network state"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"network.isOnline"})}),(0,r.jsx)(n.td,{children:"Check if online"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"network.getConnectionType"})}),(0,r.jsx)(n.td,{children:"Get connection type"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"network.isWifi"})}),(0,r.jsx)(n.td,{children:"Check if WiFi"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"network.isCellular"})}),(0,r.jsx)(n.td,{children:"Check if cellular"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"push",children:"push"}),"\n",(0,r.jsx)(n.p,{children:"Manage push notifications and local notifications."}),"\n",(0,r.jsx)(n.h3,{id:"typescript-interface-3",children:"TypeScript Interface"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"interface LocalNotification {\n  id?: string;\n  title: string;\n  body: string;\n  data?: Record<string, unknown>;\n  /** Schedule date (ISO string or timestamp) */\n  fireDate?: string | number;\n  /** Repeat interval */\n  repeatType?: 'minute' | 'hour' | 'day' | 'week' | 'month';\n  /** Badge number */\n  badge?: number;\n  /** Sound name */\n  sound?: string;\n  /** Android channel ID */\n  channelId?: string;\n}\n\ninterface PushService {\n  /**\n   * Get FCM/APNs push token\n   */\n  getToken(): Promise<string | null>;\n\n  /**\n   * Check if notification permission is granted\n   */\n  hasPermission(): Promise<boolean>;\n\n  /**\n   * Request notification permission\n   */\n  requestPermission(): Promise<boolean>;\n\n  /**\n   * Subscribe to a topic (FCM)\n   */\n  subscribeToTopic(topic: string): Promise<void>;\n\n  /**\n   * Unsubscribe from a topic\n   */\n  unsubscribeFromTopic(topic: string): Promise<void>;\n\n  /**\n   * Schedule a local notification\n   * @returns Notification ID\n   */\n  scheduleNotification(notification: LocalNotification): Promise<string>;\n\n  /**\n   * Cancel a scheduled notification\n   */\n  cancelNotification(notificationId: string): Promise<void>;\n\n  /**\n   * Get current badge count\n   */\n  getBadgeCount(): Promise<number>;\n\n  /**\n   * Set badge count\n   */\n  setBadgeCount(count: number): Promise<void>;\n\n  /**\n   * Clear badge (set to 0)\n   */\n  clearBadge(): Promise<void>;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"example-3",children:"Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { push } from '@54vie/miniapp-sdk';\n\n// Request notification permission\nconst hasPermission = await push.requestPermission();\nif (!hasPermission) {\n  console.log('User denied notification permission');\n  return;\n}\n\n// Get push token for server registration\nconst token = await push.getToken();\nif (token) {\n  await api.registerDevice({ token, platform: 'ios' });\n}\n\n// Subscribe to topics for targeted notifications\nawait push.subscribeToTopic('order_updates');\nawait push.subscribeToTopic('promotions');\nawait push.subscribeToTopic(`user_${userId}`);\n\n// Schedule a local notification\nconst notificationId = await push.scheduleNotification({\n  title: 'Order Ready',\n  body: 'Your order #12345 is ready for pickup!',\n  fireDate: Date.now() + 3600000, // 1 hour from now\n  sound: 'default',\n  badge: 1,\n  data: {\n    orderId: '12345',\n    action: 'pickup',\n  },\n});\n\n// Schedule a repeating notification\nawait push.scheduleNotification({\n  title: 'Daily Reminder',\n  body: 'Check out today\\'s deals!',\n  fireDate: new Date().setHours(9, 0, 0, 0), // 9 AM\n  repeatType: 'day',\n});\n\n// Cancel a scheduled notification\nawait push.cancelNotification(notificationId);\n\n// Manage badge count\nawait push.setBadgeCount(5);\nconst badgeCount = await push.getBadgeCount();\nconsole.log('Current badge:', badgeCount);\nawait push.clearBadge();\n\n// Unsubscribe from topic\nawait push.unsubscribeFromTopic('promotions');\n"})}),"\n",(0,r.jsx)(n.h3,{id:"bridge-actions-3",children:"Bridge Actions"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Action"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"push.getToken"})}),(0,r.jsx)(n.td,{children:"Get FCM/APNs token"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"push.hasPermission"})}),(0,r.jsx)(n.td,{children:"Check notification permission"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"push.requestPermission"})}),(0,r.jsx)(n.td,{children:"Request notification permission"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"push.subscribeToTopic"})}),(0,r.jsx)(n.td,{children:"Subscribe to FCM topic"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"push.unsubscribeFromTopic"})}),(0,r.jsx)(n.td,{children:"Unsubscribe from topic"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"push.scheduleNotification"})}),(0,r.jsx)(n.td,{children:"Schedule local notification"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"push.cancelNotification"})}),(0,r.jsx)(n.td,{children:"Cancel scheduled notification"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"push.getBadgeCount"})}),(0,r.jsx)(n.td,{children:"Get badge count"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"push.setBadgeCount"})}),(0,r.jsx)(n.td,{children:"Set badge count"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"analytics",children:"analytics"}),"\n",(0,r.jsx)(n.p,{children:"Track events and screen views for analytics."}),"\n",(0,r.jsx)(n.h3,{id:"typescript-interface-4",children:"TypeScript Interface"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"interface AnalyticsService {\n  /**\n   * Track a custom event with properties\n   */\n  track(eventName: string, properties?: Record<string, unknown>): void;\n\n  /**\n   * Track a screen view\n   */\n  screen(screenName: string): void;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"example-4",children:"Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { analytics } from '@54vie/miniapp-sdk';\n\n// Track screen views\nanalytics.screen('HomeScreen');\nanalytics.screen('ProductDetailScreen');\n\n// Track user actions\nanalytics.track('button_clicked', {\n  button_name: 'add_to_cart',\n  screen: 'ProductDetail',\n});\n\n// Track e-commerce events\nanalytics.track('product_viewed', {\n  product_id: 'SKU123',\n  product_name: 'Wireless Earbuds',\n  category: 'Electronics',\n  price: 1500000,\n  currency: 'VND',\n});\n\nanalytics.track('add_to_cart', {\n  product_id: 'SKU123',\n  quantity: 2,\n  cart_value: 3000000,\n});\n\nanalytics.track('purchase_completed', {\n  order_id: 'ORD-12345',\n  total: 3000000,\n  currency: 'VND',\n  items: [\n    { product_id: 'SKU123', quantity: 2 },\n  ],\n  payment_method: 'wallet',\n});\n\n// Track errors\nanalytics.track('error_occurred', {\n  error_type: 'network',\n  error_message: 'Failed to load products',\n  screen: 'ProductList',\n});\n"})}),"\n",(0,r.jsx)(n.h3,{id:"bridge-actions-4",children:"Bridge Actions"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Action"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"analytics.track"})}),(0,r.jsx)(n.td,{children:"Track custom event"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"analytics.screen"})}),(0,r.jsx)(n.td,{children:"Track screen view"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"api",children:"api"}),"\n",(0,r.jsx)(n.p,{children:"Make authenticated API requests through the host app proxy."}),"\n",(0,r.jsx)(n.h3,{id:"typescript-interface-5",children:"TypeScript Interface"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"interface ApiRequestOptions {\n  method?: 'GET' | 'POST' | 'PUT' | 'DELETE' | 'PATCH';\n  headers?: Record<string, string>;\n  body?: unknown;\n  timeout?: number;\n}\n\ninterface ApiResponse<T = unknown> {\n  data: T;\n  status: number;\n  headers: Record<string, string>;\n}\n\ninterface ApiService {\n  /**\n   * Make an API request through the host app\n   * Authorization header is automatically added\n   */\n  request<T = unknown>(\n    url: string,\n    options?: ApiRequestOptions\n  ): Promise<ApiResponse<T>>;\n\n  /**\n   * Shorthand for GET request\n   */\n  get<T = unknown>(url: string, options?: ApiRequestOptions): Promise<ApiResponse<T>>;\n\n  /**\n   * Shorthand for POST request\n   */\n  post<T = unknown>(url: string, body?: unknown, options?: ApiRequestOptions): Promise<ApiResponse<T>>;\n\n  /**\n   * Shorthand for PUT request\n   */\n  put<T = unknown>(url: string, body?: unknown, options?: ApiRequestOptions): Promise<ApiResponse<T>>;\n\n  /**\n   * Shorthand for DELETE request\n   */\n  delete<T = unknown>(url: string, options?: ApiRequestOptions): Promise<ApiResponse<T>>;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"example-5",children:"Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { api } from '@54vie/miniapp-sdk';\n\n// GET request\nconst response = await api.get<Product[]>('/api/products');\nconsole.log('Products:', response.data);\n\n// GET with query params\nconst searchResults = await api.get<Product[]>('/api/products?category=electronics&limit=10');\n\n// POST request\nconst newOrder = await api.post<Order>('/api/orders', {\n  items: [\n    { productId: 'SKU123', quantity: 2 },\n  ],\n  shippingAddress: {\n    street: '123 Main St',\n    city: 'Ho Chi Minh',\n  },\n});\nconsole.log('Order created:', newOrder.data.id);\n\n// PUT request\nconst updatedProfile = await api.put<User>('/api/user/profile', {\n  name: 'John Doe',\n  phone: '+84123456789',\n});\n\n// DELETE request\nawait api.delete('/api/cart/items/123');\n\n// Request with custom headers\nconst response = await api.request<Data>('/api/data', {\n  method: 'GET',\n  headers: {\n    'X-Custom-Header': 'value',\n  },\n  timeout: 10000,\n});\n\n// Handle errors\ntry {\n  const data = await api.get('/api/protected');\n} catch (error) {\n  if (error.status === 401) {\n    // Token expired, user needs to re-authenticate\n  } else if (error.status === 403) {\n    // Permission denied\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"bridge-actions-5",children:"Bridge Actions"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Action"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"api.request"})}),(0,r.jsx)(n.td,{children:"Make an authenticated API request"})]})})]}),"\n",(0,r.jsx)(n.admonition,{title:"Authentication",type:"info",children:(0,r.jsxs)(n.p,{children:["All API requests made through the ",(0,r.jsx)(n.code,{children:"api"})," service automatically include the user's authentication token. The host app handles token refresh and retry logic."]})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"service-imports",children:"Service Imports"}),"\n",(0,r.jsx)(n.p,{children:"All services are exported from the main package:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import {\n  storage,\n  device,\n  network,\n  push,\n  analytics,\n  api,\n  // Additional services\n  haptics,\n  clipboard,\n  location,\n  media,\n} from '@54vie/miniapp-sdk';\n"})}),"\n",(0,r.jsxs)(n.p,{children:["For detailed hook-based alternatives, see the ",(0,r.jsx)(n.a,{href:"/api/miniapp-sdk/hooks",children:"Hooks API documentation"}),"."]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8145(e,n,i){i.d(n,{R:()=>o,x:()=>c});var t=i(5410);const r={},s=t.createContext(r);function o(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);