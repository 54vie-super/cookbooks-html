"use strict";(globalThis.webpackChunk_54vie_cookbooks=globalThis.webpackChunk_54vie_cookbooks||[]).push([[963],{2217(e,n,t){t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"modules/analytics","title":"@54vie/analytics","description":"Tracking and analytics module for 54VIE Super App, supporting event tracking, user identification, A/B testing, and performance monitoring.","source":"@site/docs/modules/analytics.md","sourceDirName":"modules","slug":"/modules/analytics","permalink":"/modules/analytics","draft":false,"unlisted":false,"editUrl":"https://github.com/54vie/super-app/tree/main/cookbooks/docs/modules/analytics.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8,"title":"@54vie/analytics"},"sidebar":"mainSidebar","previous":{"title":"@54vie/api","permalink":"/modules/api"},"next":{"title":"@54vie/push","permalink":"/modules/push-notification"}}');var r=t(5178),a=t(8145);const s={sidebar_position:8,title:"@54vie/analytics"},c="@54vie/analytics - Analytics & Tracking",o={},l=[{value:"Installation",id:"installation",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"Event Tracking",id:"event-tracking",level:2},{value:"Basic Events",id:"basic-events",level:3},{value:"Standard Events",id:"standard-events",level:3},{value:"Revenue Tracking",id:"revenue-tracking",level:3},{value:"Timed Events",id:"timed-events",level:3},{value:"User Properties",id:"user-properties",level:2},{value:"Session Tracking",id:"session-tracking",level:2},{value:"Performance Tracking",id:"performance-tracking",level:2},{value:"Screen Performance",id:"screen-performance",level:3},{value:"A/B Testing",id:"ab-testing",level:2},{value:"Setup Experiments",id:"setup-experiments",level:3},{value:"Use Experiments",id:"use-experiments",level:3},{value:"Feature Flags",id:"feature-flags",level:3},{value:"Track Conversions",id:"track-conversions",level:3},{value:"Mini-App Attribution",id:"mini-app-attribution",level:2},{value:"Debug Mode",id:"debug-mode",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Use Standard Events",id:"1-use-standard-events",level:3},{value:"2. Include Context",id:"2-include-context",level:3},{value:"3. Track User Journey",id:"3-track-user-journey",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"54vieanalytics---analytics--tracking",children:"@54vie/analytics - Analytics & Tracking"})}),"\n",(0,r.jsx)(n.p,{children:"Tracking and analytics module for 54VIE Super App, supporting event tracking, user identification, A/B testing, and performance monitoring."}),"\n",(0,r.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"pnpm add @54vie/analytics\n"})}),"\n",(0,r.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import { AnalyticsProvider, useAnalytics } from '@54vie/analytics';\n\n// 1. Wrap app with provider\nfunction App() {\n  return (\n    <AnalyticsProvider config={{\n      appId: '54vie-app',\n      apiKey: 'your-api-key',\n      apiEndpoint: 'https://analytics.54vie.vn',\n      debug: __DEV__,\n    }}>\n      <MainApp />\n    </AnalyticsProvider>\n  );\n}\n\n// 2. Track events\nfunction ProductScreen({ productId }) {\n  const { track, screen } = useAnalytics();\n\n  useEffect(() => {\n    screen('ProductScreen', { productId });\n    track('view_product', { product_id: productId });\n  }, [productId]);\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"event-tracking",children:"Event Tracking"}),"\n",(0,r.jsx)(n.h3,{id:"basic-events",children:"Basic Events"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { useAnalytics } from '@54vie/analytics';\n\nfunction MyComponent() {\n  const { track, screen, identify, reset } = useAnalytics();\n\n  // Track custom event\n  track('button_clicked', {\n    button_name: 'checkout',\n    screen: 'cart',\n  });\n\n  // Track screen view\n  screen('HomeScreen', { referrer: 'push_notification' });\n\n  // Identify user (after login)\n  identify('user_123', {\n    name: 'John Doe',\n    email: 'john@example.com',\n    plan: 'premium',\n  });\n\n  // Reset (on logout)\n  reset();\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"standard-events",children:"Standard Events"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { Analytics, StandardEvents } from '@54vie/analytics';\n\n// Auth events\nAnalytics.track(StandardEvents.LOGIN, { method: 'email' });\nAnalytics.track(StandardEvents.SIGN_UP, { method: 'google' });\nAnalytics.track(StandardEvents.LOGOUT);\n\n// E-commerce events\nAnalytics.track(StandardEvents.VIEW_PRODUCT, {\n  product_id: '123',\n  product_name: 'iPhone 15',\n  price: 25000000,\n  currency: 'VND',\n});\n\nAnalytics.track(StandardEvents.ADD_TO_CART, {\n  product_id: '123',\n  quantity: 1,\n});\n\nAnalytics.track(StandardEvents.PURCHASE, {\n  order_id: 'order_456',\n  total: 25000000,\n  currency: 'VND',\n  items: [{ product_id: '123', quantity: 1 }],\n});\n\n// Mini-app events\nAnalytics.track(StandardEvents.MINI_APP_OPEN, {\n  app_id: 'com.54vie.shopping',\n});\n"})}),"\n",(0,r.jsx)(n.h3,{id:"revenue-tracking",children:"Revenue Tracking"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { Analytics } from '@54vie/analytics';\n\nAnalytics.trackRevenue({\n  amount: 500000,\n  currency: 'VND',\n  productId: 'premium_monthly',\n  productName: 'Premium Monthly',\n  orderId: 'order_789',\n});\n"})}),"\n",(0,r.jsx)(n.h3,{id:"timed-events",children:"Timed Events"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const { startTimer, endTimer } = useAnalytics();\n\n// Start timer\nstartTimer('checkout_flow');\n\n// ... user completes checkout ...\n\n// End timer (auto-tracks duration)\nendTimer('checkout_flow', {\n  payment_method: 'card',\n  success: true,\n});\n// Tracks: checkout_flow { duration: 45000, payment_method: 'card', success: true }\n"})}),"\n",(0,r.jsx)(n.h2,{id:"user-properties",children:"User Properties"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { useUserProperties } from '@54vie/analytics';\n\nfunction ProfileScreen() {\n  const { setProperty, setProperties, increment } = useUserProperties();\n\n  // Set single property\n  setProperty('subscription_tier', 'premium');\n\n  // Set multiple properties\n  setProperties({\n    city: 'Ho Chi Minh',\n    age_group: '25-34',\n    interests: ['tech', 'finance'],\n  });\n\n  // Increment counter\n  increment('purchase_count');\n  increment('total_spent', 500000);\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"session-tracking",children:"Session Tracking"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { useSession } from '@54vie/analytics';\n\nfunction MyComponent() {\n  const { sessionId, startTime, duration, screenCount } = useSession();\n\n  console.log(`Session: ${sessionId}`);\n  console.log(`Duration: ${duration}ms`);\n  console.log(`Screens viewed: ${screenCount}`);\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"performance-tracking",children:"Performance Tracking"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { usePerformance } from '@54vie/analytics';\n\nfunction HeavyComponent() {\n  const { startTrace, logMetric } = usePerformance();\n\n  useEffect(() => {\n    const trace = startTrace('heavy_component_render');\n\n    // Add custom attributes\n    trace.putAttribute('data_size', 'large');\n\n    // Add metrics\n    trace.putMetric('items_count', items.length);\n\n    // Stop when done\n    trace.stop();\n  }, []);\n\n  // Log standalone metric\n  logMetric('api_response_time', 245, 'ms');\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"screen-performance",children:"Screen Performance"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { useScreenPerformance } from '@54vie/analytics';\n\nfunction ProductListScreen() {\n  const { markInteractive, markFullyLoaded } = useScreenPerformance('ProductList');\n\n  useEffect(() => {\n    // Mark when user can interact\n    markInteractive();\n  }, []);\n\n  useEffect(() => {\n    if (data && images) {\n      // Mark when everything is loaded\n      markFullyLoaded();\n    }\n  }, [data, images]);\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"ab-testing",children:"A/B Testing"}),"\n",(0,r.jsx)(n.h3,{id:"setup-experiments",children:"Setup Experiments"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { registerExperiment } from '@54vie/analytics';\n\n// Register experiment\nregisterExperiment({\n  id: 'checkout_flow_v2',\n  name: 'New Checkout Flow',\n  variants: [\n    { id: 'control', name: 'Original', weight: 50 },\n    { id: 'variant_a', name: 'Simplified', weight: 50 },\n  ],\n  defaultVariant: 'control',\n});\n"})}),"\n",(0,r.jsx)(n.h3,{id:"use-experiments",children:"Use Experiments"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { useExperiment } from '@54vie/analytics';\n\nfunction CheckoutScreen() {\n  const { variant, isLoading, variantConfig } = useExperiment('checkout_flow_v2');\n\n  if (isLoading) return <Loading />;\n\n  if (variant === 'variant_a') {\n    return <SimplifiedCheckout />;\n  }\n\n  return <OriginalCheckout />;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"feature-flags",children:"Feature Flags"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { useFeatureFlag } from '@54vie/analytics';\n\nfunction NewFeature() {\n  const isEnabled = useFeatureFlag('new_feature_enabled');\n\n  if (!isEnabled) return null;\n\n  return <NewFeatureComponent />;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"track-conversions",children:"Track Conversions"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { useExperimentConversion } from '@54vie/analytics';\n\nfunction CheckoutSuccess() {\n  const { trackConversion } = useExperimentConversion('checkout_flow_v2');\n\n  useEffect(() => {\n    trackConversion('purchase_completed', orderTotal);\n  }, []);\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"mini-app-attribution",children:"Mini-App Attribution"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { useAnalytics } from '@54vie/analytics';\n\n// In mini-app\nfunction ShoppingMiniApp() {\n  const { setMiniAppContext, trackMiniAppEvent } = useAnalytics();\n\n  useEffect(() => {\n    // Set context for attribution\n    setMiniAppContext({\n      appId: 'com.54vie.shopping',\n      version: '1.2.0',\n      name: 'Shopping',\n    });\n\n    return () => clearMiniAppContext();\n  }, []);\n\n  // Events automatically include mini-app context\n  trackMiniAppEvent('product_viewed', { product_id: '123' });\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"debug-mode",children:"Debug Mode"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Enable in development\n<AnalyticsProvider config={{\n  debug: __DEV__,\n  // Events will be logged to console\n}}>\n\n// Manual flush\nconst { flush } = useAnalytics();\nawait flush(); // Force send queued events\n"})}),"\n",(0,r.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"<AnalyticsProvider config={{\n  // Required\n  appId: '54vie-app',\n  apiKey: 'your-api-key',\n  apiEndpoint: 'https://analytics.54vie.vn',\n\n  // Batching\n  flushInterval: 30000,  // Send every 30s\n  batchSize: 20,         // Or when 20 events queued\n\n  // Features\n  trackAppLifecycle: true,    // Auto-track app open/close\n  trackScreenViews: true,     // Auto-track screen views\n  trackDeepLinks: true,       // Auto-track deep links\n  trackCrashes: true,         // Auto-track crashes\n\n  // Session\n  sessionTimeout: 30 * 60 * 1000, // 30 minutes\n\n  // Privacy\n  anonymizeIp: true,\n\n  // Debug\n  debug: __DEV__,\n}}>\n"})}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsx)(n.h3,{id:"1-use-standard-events",children:"1. Use Standard Events"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Good - Use standard events\ntrack(StandardEvents.PURCHASE, { ... });\n\n// Avoid - Custom names for standard actions\ntrack('user_bought_item', { ... });\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-include-context",children:"2. Include Context"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Good - Include relevant context\ntrack('search', {\n  query: 'iphone',\n  results_count: 25,\n  filters: { category: 'phones', price_max: 30000000 },\n});\n\n// Avoid - Missing context\ntrack('search', { query: 'iphone' });\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3-track-user-journey",children:"3. Track User Journey"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Track funnel\ntrack('checkout_started');\ntrack('shipping_selected');\ntrack('payment_entered');\ntrack('order_placed');\n"})})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8145(e,n,t){t.d(n,{R:()=>s,x:()=>c});var i=t(5410);const r={},a=i.createContext(r);function s(e){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);