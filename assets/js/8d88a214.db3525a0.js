"use strict";(globalThis.webpackChunk_54vie_cookbooks=globalThis.webpackChunk_54vie_cookbooks||[]).push([[793],{196(n,e,o){o.r(e),o.d(e,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"modules/location","title":"@54vie/location","description":"Module providing location services for 54VIE Super App.","source":"@site/docs/modules/location.md","sourceDirName":"modules","slug":"/modules/location","permalink":"/modules/location","draft":false,"unlisted":false,"editUrl":"https://github.com/54vie/super-app/tree/main/cookbooks/docs/modules/location.md","tags":[],"version":"current","sidebarPosition":11,"frontMatter":{"sidebar_position":11,"title":"@54vie/location"},"sidebar":"mainSidebar","previous":{"title":"@54vie/device","permalink":"/modules/device"},"next":{"title":"@54vie/media","permalink":"/modules/media"}}');var t=o(5178),s=o(8145);const r={sidebar_position:11,title:"@54vie/location"},a="@54vie/location - Location Services",c={},l=[{value:"Installation",id:"installation",level:2},{value:"Current Location",id:"current-location",level:2},{value:"Location Tracking",id:"location-tracking",level:2},{value:"Geofencing",id:"geofencing",level:2},{value:"Geocoding",id:"geocoding",level:2},{value:"Address Autocomplete",id:"address-autocomplete",level:2},{value:"Map Components",id:"map-components",level:2},{value:"Vietnam Support",id:"vietnam-support",level:2}];function d(n){const e={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"54vielocation---location-services",children:"@54vie/location - Location Services"})}),"\n",(0,t.jsx)(e.p,{children:"Module providing location services for 54VIE Super App."}),"\n",(0,t.jsx)(e.h2,{id:"installation",children:"Installation"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"pnpm add @54vie/location\n"})}),"\n",(0,t.jsx)(e.h2,{id:"current-location",children:"Current Location"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:"import { useLocation, LocationService } from '@54vie/location';\n\n// Hook\nfunction NearbyStores() {\n  const {\n    location,\n    isLoading,\n    error,\n    hasPermission,\n    requestPermission,\n    refresh,\n  } = useLocation();\n\n  if (!hasPermission) {\n    return <Button onPress={requestPermission}>Allow Location</Button>;\n  }\n\n  if (isLoading) return <Loading />;\n\n  return <StoreList lat={location.latitude} lng={location.longitude} />;\n}\n\n// Direct\nconst service = new LocationService();\nconst position = await service.getCurrentPosition({\n  accuracy: 'high',\n  timeout: 15000,\n});\n"})}),"\n",(0,t.jsx)(e.h2,{id:"location-tracking",children:"Location Tracking"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:"import { useTracking } from '@54vie/location';\n\nfunction DeliveryTracking() {\n  const {\n    isTracking,\n    positions,\n    distance,\n    start,\n    stop,\n    pause,\n    resume,\n  } = useTracking();\n\n  return (\n    <View>\n      <MapView>\n        <Polyline coordinates={positions} />\n      </MapView>\n      <Text>Distance: {distance.toFixed(2)} km</Text>\n      <Button onPress={isTracking ? stop : start}>\n        {isTracking ? 'Stop' : 'Start'} Tracking\n      </Button>\n    </View>\n  );\n}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"geofencing",children:"Geofencing"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:"import { useGeofence } from '@54vie/location';\n\nfunction StorePromotion() {\n  const { addRegion, onEnter, onExit } = useGeofence();\n\n  useEffect(() => {\n    addRegion({\n      id: 'store-1',\n      name: 'Store ABC',\n      latitude: 10.7769,\n      longitude: 106.7009,\n      radius: 100, // meters\n    });\n\n    onEnter((region) => {\n      showNotification(`Welcome to ${region.name}!`);\n    });\n\n    onExit((region) => {\n      showNotification(`Thanks for visiting ${region.name}!`);\n    });\n  }, []);\n}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"geocoding",children:"Geocoding"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:"import { useGeocoding, GeocodingService } from '@54vie/location';\n\n// Hook\nfunction AddressInput() {\n  const { geocode, reverseGeocode, isLoading } = useGeocoding();\n\n  const handleAddressSubmit = async (address) => {\n    const location = await geocode(address);\n    console.log(location); // { latitude, longitude }\n  };\n\n  const handleMapPress = async (lat, lng) => {\n    const address = await reverseGeocode(lat, lng);\n    console.log(address); // { street, ward, district, city }\n  };\n}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"address-autocomplete",children:"Address Autocomplete"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:"import { useAddressSearch } from '@54vie/location';\n\nfunction AddressSearch() {\n  const { search, results, isLoading } = useAddressSearch();\n\n  return (\n    <View>\n      <TextInput\n        placeholder=\"Search address...\"\n        onChangeText={search}\n      />\n      <FlatList\n        data={results}\n        renderItem={({ item }) => (\n          <ListItem\n            title={item.formattedAddress}\n            subtitle={item.district}\n            onPress={() => selectAddress(item)}\n          />\n        )}\n      />\n    </View>\n  );\n}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"map-components",children:"Map Components"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:'import { MapView, Marker, Polyline, Circle } from \'@54vie/location\';\n\nfunction StoreMap() {\n  return (\n    <MapView\n      initialRegion={{\n        latitude: 10.7769,\n        longitude: 106.7009,\n        latitudeDelta: 0.01,\n        longitudeDelta: 0.01,\n      }}\n      showsUserLocation\n    >\n      <Marker\n        coordinate={{ latitude: 10.7769, longitude: 106.7009 }}\n        title="Store ABC"\n      />\n      <Circle\n        center={{ latitude: 10.7769, longitude: 106.7009 }}\n        radius={500}\n        fillColor="rgba(0, 122, 255, 0.1)"\n      />\n    </MapView>\n  );\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"vietnam-support",children:"Vietnam Support"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:"import { formatVietnamAddress, VIETNAM_LANDMARKS } from '@54vie/location';\n\n// Format address\nconst formatted = formatVietnamAddress({\n  street: '123 Nguyen Hue',\n  ward: 'Ben Nghe',\n  district: 'Quan 1',\n  city: 'Ho Chi Minh',\n});\n// \"123 Nguyen Hue, Phuong Ben Nghe, Quan 1, TP. Ho Chi Minh\"\n\n// Popular locations\nconsole.log(VIETNAM_LANDMARKS.hoChiMinh.center);\n// { lat: 10.7769, lng: 106.7009 }\n"})})]})}function u(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}},8145(n,e,o){o.d(e,{R:()=>r,x:()=>a});var i=o(5410);const t={},s=i.createContext(t);function r(n){const e=i.useContext(s);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:r(n.components),i.createElement(s.Provider,{value:e},n.children)}}}]);