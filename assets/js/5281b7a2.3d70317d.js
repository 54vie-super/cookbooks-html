"use strict";(globalThis.webpackChunk_54vie_cookbooks=globalThis.webpackChunk_54vie_cookbooks||[]).push([[443],{2963(e,n,i){i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"architecture","title":"Architecture","description":"Overview","source":"@site/docs/architecture.md","sourceDirName":".","slug":"/architecture","permalink":"/architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/54vie/super-app/tree/main/cookbooks/docs/architecture.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Architecture"},"sidebar":"mainSidebar","previous":{"title":"Getting Started","permalink":"/getting-started"},"next":{"title":"Modules Overview","permalink":"/modules/overview"}}');var r=i(5178),t=i(8145);const d={sidebar_position:3,title:"Architecture"},c="54VIE Super App Architecture",l={},o=[{value:"Overview",id:"overview",level:2},{value:"Main Components",id:"main-components",level:2},{value:"1. App Host",id:"1-app-host",level:3},{value:"2. Mini-App System",id:"2-mini-app-system",level:3},{value:"miniapp-sdk",id:"miniapp-sdk",level:4},{value:"miniapp-runtime",id:"miniapp-runtime",level:4},{value:"3. Shared Packages",id:"3-shared-packages",level:3},{value:"Module Federation",id:"module-federation",level:2},{value:"How It Works",id:"how-it-works",level:3},{value:"Dynamic Loading",id:"dynamic-loading",level:3},{value:"Bridge Protocol",id:"bridge-protocol",level:2},{value:"Available Bridge Services",id:"available-bridge-services",level:3},{value:"Data Flow",id:"data-flow",level:2},{value:"Security",id:"security",level:2},{value:"Permission System",id:"permission-system",level:3},{value:"Token Isolation",id:"token-isolation",level:3},{value:"Performance Optimizations",id:"performance-optimizations",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"54vie-super-app-architecture",children:"54VIE Super App Architecture"})}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(n.p,{children:["54VIE Super App is built using a ",(0,r.jsx)(n.strong,{children:"Micro-Frontend"})," architecture with Re.Pack's ",(0,r.jsx)(n.strong,{children:"Module Federation"}),". This enables:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Dynamic Loading"}),": Mini-apps are loaded dynamically at runtime"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Independent Deployment"}),": Each mini-app can be deployed independently"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Shared Dependencies"}),": Common packages are shared between host and mini-apps"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      54VIE Super App                         \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502                    App Host                          \u2502   \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502   \u2502\n\u2502  \u2502  \u2502  Auth   \u2502 \u2502  Nav    \u2502 \u2502 Bridge  \u2502 \u2502Registry \u2502   \u2502   \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502                            \u2502                                 \u2502\n\u2502                     Bridge Protocol                          \u2502\n\u2502                            \u2502                                 \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510          \u2502\n\u2502  \u2502Dashboard\u2502 \u2502 Booking \u2502 \u2502Shopping \u2502 \u2502  News   \u2502  ...      \u2502\n\u2502  \u2502Mini-App \u2502 \u2502Mini-App \u2502 \u2502Mini-App \u2502 \u2502Mini-App \u2502          \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                    Shared Packages                           \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2510        \u2502\n\u2502  \u2502 kit \u2502 \u2502 api \u2502 \u2502analy\u2502 \u2502store\u2502 \u2502devic\u2502 \u2502 ... \u2502        \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2518        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(n.h2,{id:"main-components",children:"Main Components"}),"\n",(0,r.jsx)(n.h3,{id:"1-app-host",children:"1. App Host"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"App Host"})," is the main React Native application, responsible for:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Authentication"}),": Managing login, tokens, sessions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Navigation"}),": Routing between screens and mini-apps"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Bridge Handlers"}),": Processing requests from mini-apps"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Mini-Program Registry"}),": Managing the list of mini-apps from backend"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// App Host Structure\napp-host/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 auth/              # Authentication module\n\u2502   \u2502   \u251c\u2500\u2500 services/      # AuthService, SSOService, BiometricService\n\u2502   \u2502   \u251c\u2500\u2500 hooks/         # useAuth, useSSO, useBiometric\n\u2502   \u2502   \u2514\u2500\u2500 utils/         # TokenManager, SessionManager\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 providers/\n\u2502   \u2502   \u2514\u2500\u2500 AppProviders   # Root providers + 17 bridge handlers\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 services/\n\u2502   \u2502   \u251c\u2500\u2500 MiniProgramRegistry  # Dynamic mini-program fetching\n\u2502   \u2502   \u2514\u2500\u2500 BundleManager        # Bundle download & extraction\n\u2502   \u2502\n\u2502   \u2514\u2500\u2500 components/\n\u2502       \u2514\u2500\u2500 MiniProgramLoader    # Dynamic mini-app loading\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-mini-app-system",children:"2. Mini-App System"}),"\n",(0,r.jsx)(n.h4,{id:"miniapp-sdk",children:"miniapp-sdk"}),"\n",(0,r.jsx)(n.p,{children:"SDK providing APIs for mini-apps to communicate with the host:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import {\n  useHostAuth,      // Authentication state\n  useHostDevice,    // Device info\n  useHostNetwork,   // Network status\n  storage,          // Persistent storage\n  analytics,        // Event tracking\n  push,             // Push notifications\n} from '@54vie/miniapp-sdk';\n"})}),"\n",(0,r.jsx)(n.h4,{id:"miniapp-runtime",children:"miniapp-runtime"}),"\n",(0,r.jsx)(n.p,{children:"Runtime managing the lifecycle of mini-apps:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Loading"}),": Loading mini-app bundles"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Lifecycle"}),": Mounting/unmounting mini-apps"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Bridge"}),": Handling communication between mini-app and host"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Permissions"}),": Managing access permissions"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"3-shared-packages",children:"3. Shared Packages"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Package"}),(0,r.jsx)(n.th,{children:"Function"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@54vie/core"})}),(0,r.jsx)(n.td,{children:"Shared dependencies, presets"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@54vie/kit"})}),(0,r.jsx)(n.td,{children:"UI components, theme"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@54vie/api"})}),(0,r.jsx)(n.td,{children:"HTTP client, caching, WebSocket"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@54vie/analytics"})}),(0,r.jsx)(n.td,{children:"Event tracking, A/B testing"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@54vie/storage"})}),(0,r.jsx)(n.td,{children:"MMKV persistent storage"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@54vie/device"})}),(0,r.jsx)(n.td,{children:"Device info, network, haptics"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@54vie/location"})}),(0,r.jsx)(n.td,{children:"Geolocation, geocoding"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@54vie/media"})}),(0,r.jsx)(n.td,{children:"Camera, gallery, processing"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@54vie/push"})}),(0,r.jsx)(n.td,{children:"FCM/APNs, local notifications"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"module-federation",children:"Module Federation"}),"\n",(0,r.jsx)(n.h3,{id:"how-it-works",children:"How It Works"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Build time"}),": Each mini-app is built as a remote module"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Runtime"}),": Host app loads mini-apps dynamically from CDN or locally"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// rspack.config.mjs (Host)\nnew Repack.plugins.ModuleFederationPluginV2({\n  name: 'host',\n  shared: {\n    react: { singleton: true },\n    'react-native': { singleton: true },\n    '@54vie/kit': { singleton: true },\n    // ... other shared packages\n  },\n})\n\n// rspack.config.mjs (Mini-app)\nnew Repack.plugins.ModuleFederationPluginV2({\n  name: 'dashboard',\n  exposes: {\n    './App': './src/App.tsx',\n  },\n  shared: { /* same as host */ },\n})\n"})}),"\n",(0,r.jsx)(n.h3,{id:"dynamic-loading",children:"Dynamic Loading"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// MiniProgramLoader.tsx\nconst MiniProgramLoader = ({ appId }) => {\n  // 1. Fetch mini-program info from registry\n  const info = await MiniProgramRegistry.getMiniProgram(appId);\n\n  // 2. Download bundle if needed\n  await BundleManager.installBundle(info);\n\n  // 3. Load remote module\n  const App = await loadRemote(`${appId}/App`);\n\n  // 4. Render\n  return <App />;\n};\n"})}),"\n",(0,r.jsx)(n.h2,{id:"bridge-protocol",children:"Bridge Protocol"}),"\n",(0,r.jsxs)(n.p,{children:["Host and mini-apps communicate via ",(0,r.jsx)(n.strong,{children:"serviceRouter"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Host: Register handler\nserviceRouter.register('storage', {\n  get: async ({ key }) => storage.get(key),\n  set: async ({ key, value }) => storage.set(key, value),\n});\n\n// Mini-app: Call via SDK\nimport { storage } from '@54vie/miniapp-sdk';\nconst value = await storage.get('my-key');\n"})}),"\n",(0,r.jsx)(n.h3,{id:"available-bridge-services",children:"Available Bridge Services"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Service"}),(0,r.jsx)(n.th,{children:"Methods"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"auth"})}),(0,r.jsx)(n.td,{children:"getUser, isAuthenticated, getAccessToken, requestLogin"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"storage"})}),(0,r.jsx)(n.td,{children:"get, set, remove, clear"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"api"})}),(0,r.jsx)(n.td,{children:"request, registerApi, unregisterApi"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"analytics"})}),(0,r.jsx)(n.td,{children:"track, screen"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"push"})}),(0,r.jsx)(n.td,{children:"getToken, requestPermission, scheduleNotification"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"device"})}),(0,r.jsx)(n.td,{children:"getInfo, getDeviceId, isEmulator"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"network"})}),(0,r.jsx)(n.td,{children:"isOnline, getConnectionType"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"location"})}),(0,r.jsx)(n.td,{children:"getCurrentPosition, geocode"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"media"})}),(0,r.jsx)(n.td,{children:"takePhoto, pickImage, cropImage"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ui"})}),(0,r.jsx)(n.td,{children:"showToast, showAlert, showActionSheet"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"haptics"})}),(0,r.jsx)(n.td,{children:"impact, notification, selection"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"clipboard"})}),(0,r.jsx)(n.td,{children:"getString, setString"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"share"})}),(0,r.jsx)(n.td,{children:"text, image"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"data-flow",children:"Data Flow"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Mini-App   \u2502\u2500\u2500\u2500\u2500\u25b6\u2502   Bridge    \u2502\u2500\u2500\u2500\u2500\u25b6\u2502    Host     \u2502\n\u2502             \u2502     \u2502  Protocol   \u2502     \u2502   Handler   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                           \u2502\n                           \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                  Native Services                     \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502 Storage \u2502 \u2502 Camera  \u2502 \u2502Location \u2502 \u2502  Push   \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(n.h2,{id:"security",children:"Security"}),"\n",(0,r.jsx)(n.h3,{id:"permission-system",children:"Permission System"}),"\n",(0,r.jsx)(n.p,{children:"Mini-apps must declare permissions in their manifest:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "appId": "com.54vie.shopping",\n  "permissions": [\n    "storage",\n    "location",\n    "camera"\n  ]\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"token-isolation",children:"Token Isolation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Each mini-app has its own namespace for storage"}),"\n",(0,r.jsx)(n.li,{children:"Access tokens are injected via bridge, not directly exposed"}),"\n",(0,r.jsx)(n.li,{children:"API requests are proxied through the host with rate limiting"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"performance-optimizations",children:"Performance Optimizations"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Bundle Caching"}),": Mini-app bundles are cached locally"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Lazy Loading"}),": Mini-apps are only loaded when needed"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Shared Dependencies"}),": React, React Native are shared"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Preloading"}),": Popular mini-apps can be preloaded"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8145(e,n,i){i.d(n,{R:()=>d,x:()=>c});var s=i(5410);const r={},t=s.createContext(r);function d(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);